<!DOCTYPE html><html><head>    <title>AltTranslate</title>	<script type="text/javascript" src="http://www.google.com/jsapi"></script>		<script>	//set default language	var prime = localStorage["primary_language"];	var second = localStorage["secondary_language"];	if (!prime || !second) {		localStorage["primary_language"] = 'en';		localStorage["secondary_language"] = 'ja';	}		var originalText = "";	var theRequest	var theSender;	var theSendResponse;		chrome.extension.onRequest.addListener(		function(request, sender, sendResponse) {			theRequest = request;			theSender = sender;			theSendResponse = sendResponse;			if( request.name == "searchThis" ){				var res = detectLang();			}		}	);		function detectLang(){		originalText = theRequest.message;				var s = document.createElement("script");		s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Detect?oncomplete=searchWord&appId=35BF4DD0D1A3A917DB0534E22955EB272AC8711C&text=" + encodeURI( originalText );		document.getElementsByTagName("head")[0].appendChild(s);	}		function searchWord( lng ){		var translateTo = localStorage["primary_language"];		if( lng == translateTo ){			translateTo = localStorage["secondary_language"];		}				var s = document.createElement("script");		s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate?oncomplete=showTranslated&appId=35BF4DD0D1A3A917DB0534E22955EB272AC8711C&from=" + lng + "&to=" + translateTo + "&text=" + encodeURI( originalText );		document.getElementsByTagName("head")[0].appendChild(s);	}	function showTranslated( theWord ){		theSendResponse(theWord);	}		</script>	</head><body></body></html>