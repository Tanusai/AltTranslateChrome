<!DOCTYPE html><html><head>    <title>AltTranslate</title>	<script type="text/javascript" src="http://www.google.com/jsapi"></script>		<script>	google.load("language", "1");		chrome.extension.onRequest.addListener(		function(request, sender, sendResponse) {			if( request.name == "searchThis" ){				var res = searchWord( request, sender, sendResponse );			}		}	);		function searchWord( theMessageEvent, sender, sendResponse ){		var translateTo = 'en';//safari.extension.settings[ 'language' ];		var word = theMessageEvent.message;		google.language.detect(word, function(result) {			if (!result.error && result.language) {				if( result.language == translateTo ){					translateTo = 'ja';//safari.extension.settings[ 'secondary' ];				}				google.language.translate(word, result.language, translateTo, function(result) {					if (result.error) {						//翻訳時エラー						sendResponse( result.message );					}else{						//翻訳成功						sendResponse( result.translation );					}				});			}else{				//言語判定時エラー				sendResponse( result.message );			}		});	}		</script>	</head><body></body></html>